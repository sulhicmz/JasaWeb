---
// Enhanced LoadingSkeleton.astro - Professional loading skeleton component
export interface Props {
  class?: string;
  lines?: number;
  height?: string;
  width?: string;
  type?: 'text' | 'card' | 'service' | 'pricing' | 'team' | 'project' | 'button';
  shimmer?: boolean;
}

const { 
  class: className = '', 
  lines = 3, 
  height = 'h-4', 
  width = 'w-full',
  type = 'text',
  shimmer = true
} = Astro.props;

// Shimmer animation styles
const shimmerStyles = `
  @keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
  }
  .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.05) 25%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0.05) 75%
    );
    background-size: 1000px 100%;
    animation: shimmer 2s infinite;
  }
`;
---

<script define:vars={{ shimmerStyles }}>
  // Add shimmer animation to document
  if (!document.getElementById('shimmer-styles')) {
    const style = document.createElement('style');
    style.id = 'shimmer-styles';
    style.textContent = shimmerStyles;
    document.head.appendChild(style);
  }
</script>

{type === 'text' && (
  <div class={`${shimmer ? 'skeleton-shimmer' : 'animate-pulse'} ${className}`}>
    {Array.from({ length: lines }).map((_, i) => (
      <div 
        class={`${height} ${width} bg-slate-700 rounded mb-2 ${i === lines - 1 ? 'mb-0' : ''}`}
        style={i === 0 ? '' : `width: ${100 - (i * 10)}%`}
      ></div>
    ))}
  </div>
)}

{type === 'card' && (
  <div class={`skeleton-shimmer glass-panel p-6 rounded-xl border border-white/10 ${className}`}>
    <div class="flex items-start space-x-4 mb-4">
      <div class="w-12 h-12 bg-slate-700 rounded-full flex-shrink-0"></div>
      <div class="flex-1 space-y-2">
        <div class="h-5 bg-slate-700 rounded w-3/4"></div>
        <div class="h-4 bg-slate-700 rounded w-1/2"></div>
      </div>
    </div>
    <div class="space-y-3">
      <div class="h-4 bg-slate-700 rounded w-full"></div>
      <div class="h-4 bg-slate-700 rounded w-5/6"></div>
      <div class="h-4 bg-slate-700 rounded w-4/6"></div>
    </div>
    <div class="flex justify-between items-center mt-6">
      <div class="h-8 bg-slate-700 rounded w-24"></div>
      <div class="h-8 bg-slate-700 rounded w-20"></div>
    </div>
  </div>
)}

{type === 'service' && (
  <div class={`skeleton-shimmer glass-panel p-8 rounded-2xl hover:bg-slate-800/60 transition-colors duration-300 ${className}`}>
    <div class="w-16 h-16 bg-slate-700 rounded-xl mb-6"></div>
    <div class="h-8 bg-slate-700 rounded w-3/4 mb-4"></div>
    <div class="space-y-3 mb-8">
      <div class="h-4 bg-slate-700 rounded w-full"></div>
      <div class="h-4 bg-slate-700 rounded w-5/6"></div>
      <div class="h-4 bg-slate-700 rounded w-4/5"></div>
    </div>
    <div class="h-10 bg-slate-700 rounded w-32"></div>
  </div>
)}

{type === 'pricing' && (
  <div class={`skeleton-shimmer glass-panel p-8 rounded-2xl text-center relative ${className}`}>
    <div class="h-6 bg-slate-700 rounded w-1/3 mx-auto mb-2"></div>
    <div class="h-10 bg-slate-700 rounded w-1/2 mx-auto mb-6"></div>
    <div class="space-y-3 mb-8">
      <div class="h-4 bg-slate-700 rounded w-full mx-auto"></div>
      <div class="h-4 bg-slate-700 rounded w-5/6 mx-auto"></div>
      <div class="h-4 bg-slate-700 rounded w-4/5 mx-auto"></div>
    </div>
    <div class="h-12 bg-slate-700 rounded w-full"></div>
  </div>
)}

{type === 'team' && (
  <div class={`skeleton-shimmer text-center ${className}`}>
    <div class="w-24 h-24 bg-slate-700 rounded-full mx-auto mb-4"></div>
    <div class="h-6 bg-slate-700 rounded w-3/4 mx-auto mb-2"></div>
    <div class="h-4 bg-slate-700 rounded w-2/3 mx-auto mb-4"></div>
    <div class="flex justify-center space-x-3">
      <div class="w-8 h-8 bg-slate-700 rounded-full"></div>
      <div class="w-8 h-8 bg-slate-700 rounded-full"></div>
      <div class="w-8 h-8 bg-slate-700 rounded-full"></div>
    </div>
  </div>
)}

{type === 'project' && (
  <div class={`skeleton-shimmer glass-panel p-6 rounded-xl ${className}`}>
    <div class="flex items-start justify-between mb-4">
      <div class="h-6 bg-slate-700 rounded w-1/2"></div>
      <div class="h-6 bg-slate-700 rounded w-20"></div>
    </div>
    <div class="space-y-2 mb-4">
      <div class="h-4 bg-slate-700 rounded w-full"></div>
      <div class="h-4 bg-slate-700 rounded w-4/5"></div>
    </div>
    <div class="flex items-center justify-between">
      <div class="h-4 bg-slate-700 rounded w-24"></div>
      <div class="h-8 bg-slate-700 rounded w-16"></div>
    </div>
  </div>
)}

{type === 'button' && (
  <div class={`skeleton-shimmer h-10 bg-slate-700 rounded-lg ${width} ${className}`}></div>
)}