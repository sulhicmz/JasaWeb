---
// src/pages/portal/analytics.astro
import Layout from '../../layouts/Layout.astro';
import DashboardHeader from '../../components/portal/DashboardHeader.astro';
import AnalyticsDashboard from '../../components/portal/AnalyticsDashboard.tsx';

export interface Props {
  title?: string;
}

export const prerender = true;

const { title } = Astro.props;
---

<Layout title="Analytics Dashboard">
  <div class="min-h-screen bg-gray-50">
    <DashboardHeader currentPage="analytics" />
    
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Page Header -->
      <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900">Analytics</h1>
        <p class="mt-2 text-gray-600">Comprehensive insights and reporting for your projects</p>
      </div>

      <!-- Analytics Dashboard -->
      <AnalyticsDashboard client:load />
    </div>
  </div>

  <!-- Authentication Check Script -->
  <script client:load>
    // Check if user is authenticated
    const isAuthenticated = localStorage.getItem('authToken');
    if (!isAuthenticated) {
      // Redirect to login page if not authenticated
      window.location.href = '/login?redirect=' + encodeURIComponent(window.location.pathname);
    }
  </script>
</Layout>