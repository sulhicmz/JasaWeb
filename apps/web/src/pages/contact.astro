---
// src/pages/contact.astro
import Layout from '../layouts/Layout.astro';
---

<Layout title="Kontak">
  <section class="py-16">
    <div class="container mx-auto px-4">
      <h1 class="text-3xl font-bold text-center mb-4">Hubungi Kami</h1>
      <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">Kami siap membantu Anda dalam pembuatan website sesuai kebutuhan.</p>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <div>
          <h2 class="text-2xl font-bold mb-6">Kirim Pesan</h2>
          <form id="contactForm" class="space-y-6">
            <div>
              <label for="name" class="block text-gray-700 mb-2">Nama Lengkap</label>
              <input type="text" id="name" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Nama Anda" required>
            </div>
            
            <div>
              <label for="email" class="block text-gray-700 mb-2">Email</label>
              <input type="email" id="email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="email@contoh.com" required>
            </div>
            
            <div>
              <label for="service" class="block text-gray-700 mb-2">Layanan yang Dibutuhkan</label>
              <select id="service" name="service" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                <option value="">Pilih layanan</option>
                <option value="school">Website Sekolah</option>
                <option value="news">Portal Berita</option>
                <option value="company">Company Profile</option>
                <option value="other">Lainnya</option>
              </select>
            </div>
            
            <div>
              <label for="message" class="block text-gray-700 mb-2">Pesan</label>
              <textarea id="message" name="message" rows="5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Jelaskan kebutuhan website Anda..." required></textarea>
            </div>
            
            <button type="submit" class="bg-blue-600 text-white py-3 px-8 rounded-lg hover:bg-blue-700 transition w-full">Kirim Pesan</button>
          </form>
          
          <!-- Success message -->
          <div id="successMessage" class="hidden mt-6 p-4 bg-green-100 text-green-700 rounded-lg">
            <p id="successText"></p>
          </div>
          
          <!-- Error message -->
          <div id="errorMessage" class="hidden mt-6 p-4 bg-red-100 text-red-700 rounded-lg">
            <p id="errorText"></p>
          </div>
        </div>
        
        <div>
          <h2 class="text-2xl font-bold mb-6">Informasi Kontak</h2>
          <div class="space-y-6">
            <div class="flex items-start">
              <div class="text-blue-500 text-2xl mr-4">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <div>
                <h3 class="text-lg font-semibold">Alamat</h3>
                <p class="text-gray-600">Jl. Contoh Alamat No. 123, Jakarta, Indonesia</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="text-blue-500 text-2xl mr-4">
                <i class="fas fa-phone"></i>
              </div>
              <div>
                <h3 class="text-lg font-semibold">Telepon</h3>
                <p class="text-gray-600">+62 123 4567 8900</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="text-blue-500 text-2xl mr-4">
                <i class="fas fa-envelope"></i>
              </div>
              <div>
                <h3 class="text-lg font-semibold">Email</h3>
                <p class="text-gray-600">info@jasaweb.com</p>
              </div>
            </div>
            
            <div class="flex items-start">
              <div class="text-blue-500 text-2xl mr-4">
                <i class="fas fa-clock"></i>
              </div>
              <div>
                <h3 class="text-lg font-semibold">Jam Operasional</h3>
                <p class="text-gray-600">Senin - Jumat: 08:00 - 17:00 WIB</p>
                <p class="text-gray-600">Sabtu: 09:00 - 13:00 WIB</p>
              </div>
            </div>
          </div>
          
          <div class="mt-10">
            <h2 class="text-2xl font-bold mb-6">Lokasi Kami</h2>
            <div class="bg-gray-200 h-64 rounded-lg flex items-center justify-center">
              <span class="text-gray-500">Peta Lokasi</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <script is:inline>
    document.getElementById('contactForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Hide previous messages
      document.getElementById('successMessage').classList.add('hidden');
      document.getElementById('errorMessage').classList.add('hidden');
      
      // Get form data
      const formData = new FormData(this);
      
      try {
        // Submit form data to API endpoint
        const response = await fetch('/api/contact', {
          method: 'POST',
          body: formData
        });
        
        const result = await response.json();
        
        if (result.success) {
          // Show success message
          document.getElementById('successText').textContent = result.message;
          document.getElementById('successMessage').classList.remove('hidden');
          
          // Reset form
          this.reset();
        } else {
          // Show error message
          document.getElementById('errorText').textContent = result.error;
          document.getElementById('errorMessage').classList.remove('hidden');
        }
      } catch (error) {
        // Show error message
        document.getElementById('errorText').textContent = 'Terjadi kesalahan saat memproses pesan Anda. Silakan coba lagi.';
        document.getElementById('errorMessage').classList.remove('hidden');
      }
    });
  </script>
</Layout>