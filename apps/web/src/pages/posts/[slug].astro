---
// src/pages/posts/[slug].astro
import Layout from '../../layouts/Layout.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
---

<Layout title={post.data.title}>
  <article class="py-12 bg-white">
    <div class="container mx-auto px-4 max-w-3xl">
      <header class="mb-8 text-center">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">{post.data.title}</h1>
        <div class="flex items-center justify-center space-x-4 text-gray-600 mb-6">
          <span>{post.data.author}</span>
          <span>â€¢</span>
          <time datetime={post.data.date.toISOString()}>
            {post.data.date.toLocaleDateString('id-ID', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric' 
            })}
          </time>
        </div>
        {post.data.tags && (
          <div class="flex flex-wrap justify-center gap-2">
            {post.data.tags.map((tag) => (
              <span class="bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full">
                #{tag}
              </span>
            ))}
          </div>
        )}
      </header>
      
      <div class="prose prose-lg max-w-none">
        <!-- The content will be rendered here -->
        <slot />
      </div>
      
      <footer class="mt-12 pt-8 border-t border-gray-200">
        <div class="flex items-center justify-between">
          <a href="/blog" class="text-blue-600 hover:text-blue-800 flex items-center">
            <i class="fas fa-arrow-left mr-2"></i> Kembali ke Blog
          </a>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-600 hover:text-blue-600">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="text-gray-600 hover:text-blue-600">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="text-gray-600 hover:text-blue-600">
              <i class="fab fa-linkedin-in"></i>
            </a>
          </div>
        </div>
      </footer>
    </div>
  </article>
</Layout>